<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hijaiyah Match Game</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Use Inter font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Noto+Naskh+Arabic:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* Custom styles for the game */
        body {
            /* Use Inter, with Noto Naskh Arabic as a fallback for the characters */
            font-family: 'Inter', 'Noto Naskh+Arabic', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* Set perspective for the 3D flip */
        .game-board {
            perspective: 1000px;
        }

        .card {
            width: 100px;
            height: 140px;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s;
            cursor: pointer;
        }

        /* Media query for smaller screens */
        @media (max-width: 640px) {
            .card {
                width: 80px;
                height: 110px;
            }
        }
        
        @media (max-width: 400px) {
            .card {
                width: 70px;
                height: 100px;
            }
        }

        .card.is-flipped {
            transform: rotateY(180deg);
        }

        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 0.5rem; /* rounded-lg */
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }

        .card-front {
            background-color: white;
            color: #1f2937; /* gray-800 */
            /* The character is rotated 180deg initially */
            transform: rotateY(180deg);
            /* Make the character large and clear */
            font-size: 3.75rem; /* 60px */
            line-height: 1;
            font-weight: 700;
            font-family: 'Noto Naskh Arabic', 'Inter', sans-serif;
        }

        .card-back {
            background-image: linear-gradient(135deg, #60a5fa 0%, #3b82f6 100%); /* blue-400 to blue-600 */
            color: white;
            font-size: 3rem; /* 48px */
            line-height: 1;
        }

        /* Style for matched cards */
        .card.is-matched {
            /* We can add a subtle effect, like reduced opacity or a border */
            opacity: 0.7;
            cursor: default;
        }
        
        /* Simple modal for win message */
        .modal {
            transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center p-4">

    <main class="bg-white p-6 sm:p-8 rounded-2xl shadow-xl w-full max-w-lg mx-auto">
        
        <!-- Game Header -->
        <div class="text-center mb-6">
            <h1 class="text-3xl sm:text-4xl font-bold text-blue-600">Hijaiyah Match</h1>
            <p class="text-gray-600 mt-2">Find the matching Arabic characters!</p>
        </div>

        <!-- Game Info Bar -->
        <div class="flex justify-between items-center mb-6 px-2">
            <div class="text-lg">
                <span class="font-semibold text-gray-700">Moves:</span>
                <span id="moves-count" class="font-bold text-blue-600 text-xl">0</span>
            </div>
            <button id="reset-button" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-5 rounded-lg shadow-md transition-all duration-200 transform hover:scale-105">
                New Game
            </button>
        </div>

        <!-- Game Board -->
        <!-- Use grid-cols-3 for 4x3 layout on small screens, sm:grid-cols-4 for wider -->
        <div id="game-board" class="grid grid-cols-3 sm:grid-cols-4 gap-3 sm:gap-4 justify-center">
            <!-- Cards will be generated by JavaScript -->
        </div>

    </main>
    
    <!-- Win Message Modal -->
    <div id="win-modal" class="modal fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 opacity-0 invisible z-50">
        <div class="bg-white p-8 rounded-xl shadow-2xl text-center max-w-sm w-full transform scale-95 transition-transform duration-300">
            <h2 class="text-3xl font-bold text-green-500 mb-4">Congratulations!</h2>
            <p class="text-gray-700 text-lg mb-2">You found all the matches!</p>
            <p class="text-gray-600 text-lg mb-6">Total Moves: <span id="final-moves" class="font-bold">0</span></p>
            <button id="play-again-button" class="bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-6 rounded-lg shadow-lg text-lg transition-all duration-200 transform hover:scale-105">
                Play Again
            </button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- Game Variables ---
            const gameBoard = document.getElementById('game-board');
            const movesCountEl = document.getElementById('moves-count');
            const resetButton = document.getElementById('reset-button');
            const winModal = document.getElementById('win-modal');
            const finalMovesEl = document.getElementById('final-moves');
            const playAgainButton = document.getElementById('play-again-button');

            // List of characters to match (6 pairs for a 12-card grid)
            const characters = ['أ', 'ب', 'ت', 'ث', 'ج', 'ح'];
            
            let gameCards = [];
            let flippedCards = [];
            let matchedPairs = 0;
            let moves = 0;
            let canFlip = true; // Prevent flipping more than 2 cards

            // --- Game Functions ---

            /**
             * Shuffle an array using the Fisher-Yates algorithm
             */
            function shuffle(array) {
                for (let i = array.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [array[i], array[j]] = [array[j], array[i]];
                }
                return array;
            }

            /**
             * Initialize and start a new game
             */
            function initGame() {
                // Reset game state
                matchedPairs = 0;
                moves = 0;
                canFlip = true;
                flippedCards = [];
                gameCards = [...characters, ...characters]; // Create 6 pairs
                shuffle(gameCards);
                
                // Clear the board and counters
                gameBoard.innerHTML = '';
                movesCountEl.textContent = '0';
                
                // Hide modal
                winModal.classList.add('opacity-0', 'invisible');
                winModal.querySelector('div').classList.add('scale-95');

                // Create and append cards
                gameCards.forEach(char => {
                    const card = createCard(char);
                    gameBoard.appendChild(card);
                });
            }

            /**
             * Create a single card element
             */
            function createCard(character) {
                const card = document.createElement('div');
                card.className = 'card rounded-lg';
                card.dataset.char = character;

                card.innerHTML = `
                    <div class="card-face card-back">
                        <!-- Simple star icon for card back -->
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                          <path stroke-linecap="round" stroke-linejoin="round" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.196-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.783-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z" />
                        </svg>
                    </div>
                    <div class="card-face card-front">
                        ${character}
                    </div>
                `;
                
                card.addEventListener('click', handleCardClick);
                return card;
            }

            /**
             * Handle clicking on a card
             */
            function handleCardClick(event) {
                if (!canFlip) return; // Wait for timeout or animation
                
                const clickedCard = event.currentTarget;

                // Ignore if already flipped or matched
                if (clickedCard.classList.contains('is-flipped') || clickedCard.classList.contains('is-matched')) {
                    return;
                }
                
                // Flip the card
                clickedCard.classList.add('is-flipped');
                flippedCards.push(clickedCard);

                // Check if two cards are flipped
                if (flippedCards.length === 2) {
                    incrementMoves();
                    canFlip = false; // Disable flipping
                    checkForMatch();
                }
            }

            /**
             * Check if the two flipped cards are a match
             */
            function checkForMatch() {
                const [card1, card2] = flippedCards;

                if (card1.dataset.char === card2.dataset.char) {
                    // It's a match!
                    card1.classList.add('is-matched');
                    card2.classList.add('is-matched');
                    
                    matchedPairs++;
                    flippedCards = []; // Reset flipped cards array
                    canFlip = true; // Allow flipping again
                    
                    // Check for win condition
                    if (matchedPairs === characters.length) {
                        showWinModal();
                    }
                } else {
                    // Not a match, flip back after a delay
                    setTimeout(() => {
                        card1.classList.remove('is-flipped');
                        card2.classList.remove('is-flipped');
                        
                        flippedCards = []; // Reset flipped cards array
                        canFlip = true; // Allow flipping again
                    }, 1000); // 1 second delay
                }
            }
            
            /**
             * Increment and update the moves counter
             */
            function incrementMoves() {
                moves++;
                movesCountEl.textContent = moves;
            }
            
            /**
             * Show the win modal
             */
             function showWinModal() {
                 finalMovesEl.textContent = moves;
                 winModal.classList.remove('opacity-0', 'invisible');
                 // Trigger the scale animation
                 setTimeout(() => {
                     winModal.querySelector('div').classList.remove('scale-95');
                 }, 10); // Small delay to ensure transition triggers
             }

            // --- Event Listeners ---
            resetButton.addEventListener('click', initGame);
            playAgainButton.addEventListener('click', initGame);

            // --- Start Game ---
            initGame();
        });
    </script>
</body>
</html>
